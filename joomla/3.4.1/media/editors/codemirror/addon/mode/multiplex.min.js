!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.multiplexingMode=function(n){function t(e,n,t){if("string"==typeof n)return e.indexOf(n,t);var r=n.exec(t?e.slice(t):e);return r?r.index+t:-1}var r=Array.prototype.slice.call(arguments,1),i=r.length;return{startState:function(){return{outer:e.startState(n),innerActive:null,inner:null}},copyState:function(t){return{outer:e.copyState(n,t.outer),innerActive:t.innerActive,inner:t.innerActive&&e.copyState(t.innerActive.mode,t.inner)}},token:function(o,c){if(c.innerActive){var u=c.innerActive,l=o.string;if(!u.close&&o.sol())return c.innerActive=c.inner=null,this.token(o,c);var a=u.close?t(l,u.close,o.pos):-1;if(a==o.pos)return o.match(u.close),c.innerActive=c.inner=null,u.delimStyle;a>-1&&(o.string=l.slice(0,a));var s=u.mode.token(o,c.inner);return a>-1&&(o.string=l),u.innerStyle&&(s=s?s+" "+u.innerStyle:u.innerStyle),s}for(var v=1/0,l=o.string,d=0;i>d;++d){var f=r[d],a=t(l,f.open,o.pos);if(a==o.pos)return o.match(f.open),c.innerActive=f,c.inner=e.startState(f.mode,n.indent?n.indent(c.outer,""):0),f.delimStyle;-1!=a&&v>a&&(v=a)}1/0!=v&&(o.string=l.slice(0,v));var A=n.token(o,c.outer);return 1/0!=v&&(o.string=l),A},indent:function(t,r){var i=t.innerActive?t.innerActive.mode:n;return i.indent?i.indent(t.innerActive?t.inner:t.outer,r):e.Pass},blankLine:function(t){var o=t.innerActive?t.innerActive.mode:n;if(o.blankLine&&o.blankLine(t.innerActive?t.inner:t.outer),t.innerActive)"\n"===t.innerActive.close&&(t.innerActive=t.inner=null);else for(var c=0;i>c;++c){var u=r[c];"\n"===u.open&&(t.innerActive=u,t.inner=e.startState(u.mode,o.indent?o.indent(t.outer,""):0))}},electricChars:n.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:n}}}}});